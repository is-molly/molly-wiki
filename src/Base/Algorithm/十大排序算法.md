---
order: 1
date: 2024-04-08
---
# åå¤§æ’åºç®—æ³•

## æ¦‚è¿°

å…¶ä¸­ å†’æ³¡ï¼Œé€‰æ‹©ï¼Œå½’å¹¶ï¼Œå¿«é€Ÿï¼Œå¸Œå°”ï¼Œå †æ’åºå±äº`æ¯”è¾ƒæ’åº`

![](./images/20211010185615.png)

**ç¨³å®šæ€§ç†è§£**

å¦‚æœç›¸ç­‰çš„ä¸¤ä¸ªå…ƒç´ ï¼Œåœ¨æ’åºå‰åçš„ç›¸å¯¹ä½ç½®ä¿æŒä¸å˜ï¼Œé‚£ä¹ˆè¿™æ˜¯ç¨³å®šçš„æ’åºç®—æ³•ã€‚

- æ’åºå‰ï¼š5ï¼Œ1ï¼Œ3(a)ï¼Œ4ï¼Œ7ï¼Œ3(b)

- ç¨³å®šçš„æ’åºï¼š1ï¼Œ3(a)ï¼Œ3(b)ï¼Œ4ï¼Œ5ï¼Œ7

- ä¸ç¨³å®šçš„æ’åºï¼š1ï¼Œ3(b)ï¼Œ3(a)ï¼Œ4ï¼Œ5ï¼Œ7

**åŸåœ°ç®—æ³•ï¼ˆIn-place Algorithmï¼‰ç†è§£**

å®šä¹‰ï¼šä¸ä¾èµ–é¢å¤–çš„èµ„æºæˆ–ä¾èµ–å°‘æ•°çš„é¢å¤–èµ„æºï¼ˆç©ºé—´å¤æ‚åº¦è¾ƒä½ï¼‰ï¼Œä»…ä¾é è¾“å‡ºè¦†ç›–è¾“å…¥ï¼ˆä¾‹å¦‚ç›´æ¥å¯¹è¾“å…¥çš„æ•°ç»„è¿›è¡Œæ“ä½œï¼‰

## å·¥å…·ç±»

> ç”¨äºæä¾›æµ‹è¯•æ•°æ®ä¸æµ‹è¯•ä»£ç æ­£ç¡®æ€§

### æ–­è¨€å·¥å…·ç±»

```java
public class Asserts {
   public static void test(boolean value) {
      try {
         if (!value) throw new Exception("æµ‹è¯•æœªé€šè¿‡");
      } catch (Exception e) {
         e.printStackTrace();
      }
   }
}
```

### Integerså·¥å…·ç±»

```java
public class Integers {
	/** ç”Ÿæˆéšæœºæ•° */
	public static Integer[] random(int count, int min, int max) {
		if (count <= 0 || min > max) return null;
		Integer[] array = new Integer[count];
		int delta = max - min + 1;
		for (int i = 0; i < count; i++) {
			array[i] = min + (int)(Math.random() * delta);
		}
		return array;
	}

	/** åˆå¹¶ä¸¤ä¸ªæ•°ç»„ */
	public static Integer[] combine(Integer[] array1, Integer[] array2) {
		if (array1 == null || array2 == null) return null;
		Integer[] array = new Integer[array1.length + array2.length];
		for (int i = 0; i < array1.length; i++) {
			array[i] = array1[i];
		}
		for (int i = 0; i < array2.length; i++) {
			array[i + array1.length] = array2[i];
		}
		return array;
		
	}

	public static Integer[] same(int count, int unsameCount) {
		if (count <= 0 || unsameCount > count) return null;
		Integer[] array = new Integer[count];
		for (int i = 0; i < unsameCount; i++) {
			array[i] = unsameCount - i;
		}
		for (int i = unsameCount; i < count; i++) {
			array[i] = unsameCount + 1;
		}
		return array;
	}

	/**
	 * ç”Ÿæˆå¤´éƒ¨å’Œå°¾éƒ¨æ˜¯å‡åºçš„æ•°ç»„
	 * disorderCountï¼šå¸Œæœ›å¤šå°‘ä¸ªæ•°æ®æ˜¯æ— åºçš„
	 */
	public static Integer[] headTailAscOrder(int min, int max, int disorderCount) {
		Integer[] array = ascOrder(min, max);
		if (disorderCount > array.length) return array;
		
		int begin = (array.length - disorderCount) >> 1;
		reverse(array, begin, begin + disorderCount);
		return array;
	}

	/**
	 * ç”Ÿæˆä¸­é—´æ˜¯å‡åºçš„æ•°ç»„
	 * disorderCountï¼šå¸Œæœ›å¤šå°‘ä¸ªæ•°æ®æ˜¯æ— åºçš„
	 */
	public static Integer[] centerAscOrder(int min, int max, int disorderCount) {
		Integer[] array = ascOrder(min, max);
		if (disorderCount > array.length) return array;
		int left = disorderCount >> 1;
		reverse(array, 0, left);
		
		int right = disorderCount - left;
		reverse(array, array.length - right, array.length);
		return array;
	}

	/**
	 * ç”Ÿæˆå¤´éƒ¨æ˜¯å‡åºçš„æ•°ç»„
	 * disorderCountï¼šå¸Œæœ›å¤šå°‘ä¸ªæ•°æ®æ˜¯æ— åºçš„
	 */
	public static Integer[] headAscOrder(int min, int max, int disorderCount) {
		Integer[] array = ascOrder(min, max);
		if (disorderCount > array.length) return array;
		reverse(array, array.length - disorderCount, array.length);
		return array;
	}

	/**
	 * ç”Ÿæˆå°¾éƒ¨æ˜¯å‡åºçš„æ•°ç»„
	 * disorderCountï¼šå¸Œæœ›å¤šå°‘ä¸ªæ•°æ®æ˜¯æ— åºçš„
	 */
	public static Integer[] tailAscOrder(int min, int max, int disorderCount) {
		Integer[] array = ascOrder(min, max);
		if (disorderCount > array.length) return array;
		reverse(array, 0, disorderCount);
		return array;
	}

	/** å‡åºç”Ÿæˆæ•°ç»„ */
	public static Integer[] ascOrder(int min, int max) {
		if (min > max) return null;
		Integer[] array = new Integer[max - min + 1];
		for (int i = 0; i < array.length; i++) {
			array[i] = min++;
		}
		return array;
	}

	/** é™åºç”Ÿæˆæ•°ç»„ */
	public static Integer[] descOrder(int min, int max) {
		if (min > max) return null;
		Integer[] array = new Integer[max - min + 1];
		for (int i = 0; i < array.length; i++) {
			array[i] = max--;
		}
		return array;
	}
	
	/** åè½¬æ•°ç»„ */
	private static void reverse(Integer[] array, int begin, int end) {
		int count = (end - begin) >> 1;
		int sum = begin + end - 1;
		for (int i = begin; i < begin + count; i++) {
			int j = sum - i;
			int tmp = array[i];
			array[i] = array[j];
			array[j] = tmp;
		}
	}

	/** å¤åˆ¶æ•°ç»„ */
	public static Integer[] copy(Integer[] array) {
		return Arrays.copyOf(array, array.length);
	}

	/** åˆ¤æ–­æ•°ç»„æ˜¯å¦å‡åº */
	public static boolean isAscOrder(Integer[] array) {
		if (array == null || array.length == 0) return false;
		for (int i = 1; i < array.length; i++) {
			if (array[i - 1] > array[i]) return false;
		}
		return true;
	}

	/** æ‰“å°æ•°ç»„ */
	public static void println(Integer[] array) {
		if (array == null) return;
		StringBuilder string = new StringBuilder();
		for (int i = 0; i < array.length; i++) {
			if (i != 0) string.append("_");
			string.append(array[i]);
		}
		System.out.println(string);
	}
}
```

### æ—¶é—´æµ‹è¯•å·¥å…·ç±»

```java
public class Times {
	private static final SimpleDateFormat fmt = new SimpleDateFormat("HH:mm:ss.SSS");
	
	public interface Task {
		void execute();
	}
	
	public static void test(String title, Task task) {
		if (task == null) return;
		title = (title == null) ? "" : ("ã€" + title + "ã€‘");
		System.out.println(title);
		System.out.println("å¼€å§‹ï¼š" + fmt.format(new Date()));
		long begin = System.currentTimeMillis();
		task.execute();
		long end = System.currentTimeMillis();
		System.out.println("ç»“æŸï¼š" + fmt.format(new Date()));
		double delta = (end - begin) / 1000.0;
		System.out.println("è€—æ—¶ï¼š" + delta + "ç§’");
		System.out.println("-------------------------------------");
	}
}
```

### SortæŠ½è±¡çˆ¶ç±»

```java
public abstract class Sort<T extends Comparable<T>> implements Comparable<Sort<T>> {
    /** ç›®æ ‡æ•°ç»„ */
    protected T[] array;
    /** æ¯”è¾ƒæ¬¡æ•° */
    private int cmpCount;
    /** äº¤æ¢æ¬¡æ•° */
    private int swapCount;
    /** æ‰§è¡Œæ—¶é—´ */
    private long time;
    /** å°æ•°æ ¼å¼åŒ– */
    private DecimalFormat fmt = new DecimalFormat("#.00");

    /**
     * é¢„å¤„ç†
     */
    public T[] sort(T[] array) {
        if (array == null || array.length < 2) return null;
        this.array = array;
        long begin = System.currentTimeMillis();
        sort();
        time = System.currentTimeMillis() - begin;
        return array;
    }

    /** ç›®æ ‡æ–¹æ³• */
    protected abstract void sort();

    /**
     * æ¯”è¾ƒæ•°ç»„ä¸‹æ ‡å¯¹åº”çš„å€¼
     *
     * è¿”å›å€¼ç­‰äº0ï¼Œä»£è¡¨ array[index1] == array[index2]
     * è¿”å›å€¼å°äº0ï¼Œä»£è¡¨ array[index1] < array[index2]
     * è¿”å›å€¼å¤§äº0ï¼Œä»£è¡¨ array[index1] > array[index2]
     */
    protected int cmp(int index1, int index2) {
        cmpCount++;
        return array[index1].compareTo(array[index2]);
    }

    /** æ¯”è¾ƒå€¼ */
    protected int cmp(T value1, T value2) {
        cmpCount++;
        return value1.compareTo(value2);
    }

    /** äº¤æ¢å€¼ */
    protected void swap(int index1, int index2) {
        swapCount++;
        T tmp = array[index1];
        array[index1] = array[index2];
        array[index2] = tmp;
    }

    /** ç¨³å®šæ€§æµ‹è¯• */
    @SuppressWarnings("unchecked")
    private boolean isStable() {
        if (this instanceof ShellSort) return false;
        Student[] students = new Sort.Student[20];
        for (int i = 0; i < students.length; i++) {
            //ï¼ˆ0ï¼Œ10ï¼‰ ï¼ˆ10ï¼Œ10ï¼‰ ï¼ˆ20ï¼Œ10ï¼‰ ï¼ˆ30ï¼Œ10ï¼‰
            students[i] = new Student(i * 10, 10);
        }
        sort((T[]) students);//åªä¼šå¯¹å¹´é¾„è¿›è¡Œæ’åº
        for (int i = 1; i < students.length; i++) {
            int score = students[i].score;
            int prevScore = students[i - 1].score;
            if (score != prevScore + 10) return false;
        }
        return true;
    }

    private static class Student implements Comparable<Student>{
        Integer score;
        Integer age;
        public Student(Integer score, Integer age) {
            this.score = score;
            this.age = age;
        }

        @Override
        public int compareTo(Student o) {
            return age - o.age;
        }
    }

    /** æ’åºæ–¹å¼ */
    @Override
    public int compareTo(Sort o) {
        int result = (int)(time - o.time);
        if(result != 0) return result;
        result = cmpCount - o.cmpCount;
        if(result != 0) return result;
        return swapCount - o.swapCount;
    }

    @Override
    public String toString() {
        return "ã€" + getClass().getSimpleName() + "ã€‘\n"
                + "äº¤æ¢æ¬¡æ•° ==> " + numberString(swapCount) + "\n"
                + "æ¯”è¾ƒæ¬¡æ•° ==> " + numberString(cmpCount) + "\n"
                + "æ‰§è¡Œæ—¶é—´ ==> " + time * 0.001 + "s" + "\n"
                + "ç¨³å®šæ€§ ==> " + isStable() + "\n"
                + "=================================";
    }

    /** æ•°å­—æ ¼å¼åŒ– */
    private String numberString(int number) {
        if (number < 10000) return "" + number;

        if (number < 100000000) {
            return fmt.format(number / 10000.0) + "ä¸‡";
        }
        return fmt.format(number / 100000000.0) + "äº¿";
    }

}
```

## å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰

### æ‰§è¡Œæµç¨‹

- ä»å¤´å¼€å§‹æ¯”è¾ƒæ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ï¼Œå¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§å°±äº¤æ¢å®ƒä»¬çš„ä½ç½®ã€‚æ‰§è¡Œå®Œä¸€è½®åæœ€æœ«å°¾å“ªä¸ªå…ƒç´ å°±æ˜¯æœ€å¤§çš„å…ƒç´ 
- å¿½ç•¥ç¬¬ä¸€æ­¥æ‰¾åˆ°çš„æœ€å¤§å…ƒç´ ï¼Œé‡å¤æ‰§è¡Œç¬¬ä¸€æ­¥ï¼Œç›´åˆ°å…¨éƒ¨å…ƒç´ æœ‰åº

![](./images/20210131003846.gif)

### åŸºæœ¬å®ç°

```java
public void sort() {
    for (int eIndex = array.length - 1; eIndex > 0; eIndex--) {
        for (int i = 1; i <= eIndex; i++) {
            if (cmp(i, i - 1) < 0) {
                swap(i, i - 1);
            }
        }
    }
}
```

### ä¼˜åŒ–ä¸€

ä¼˜åŒ–æ–¹æ¡ˆï¼šå¦‚æœåºåˆ—å·²ç»å®Œå…¨æœ‰åºï¼Œå¯ä»¥æå‰ç»ˆæ­¢å†’æ³¡æ’åº

ç¼ºç‚¹ï¼šåªæœ‰å½“å®Œå…¨æœ‰åºæ—¶æ‰ä¼šæå‰ç»ˆæ­¢å†’æ³¡æ’åºï¼Œæ¦‚ç‡å¾ˆä½

```java
public void sort() {
    boolean sorted;
    for (int eIndex = array.length - 1; eIndex > 0; eIndex--) {
        sorted = true;
        for (int i = 1; i <= eIndex; i++) {
            if (cmp(i,i - 1) < 0) {
                swap(i, i - 1);
                sorted = false;
            }
        }
        if (sorted) break;
    }
}
```

### ä¼˜åŒ–äºŒ

ä¼˜åŒ–æ–¹æ¡ˆï¼šå¦‚æœåºåˆ—å°¾éƒ¨å·²ç»å±€éƒ¨æœ‰åºï¼Œå¯ä»¥è®°å½•æœ€åä¸€æ¬¡äº¤æ¢çš„ä½ç½®ï¼Œå‡å°‘æ¯”è¾ƒæ¬¡æ•°

![](./images/20210130020153.png)

```java
public class BubbleSort<T extends Comparable<T>> extends Sort<T> {
    /**
     *  ä¼˜åŒ–æ–¹å¼äºŒï¼šå¦‚æœåºåˆ—å°¾éƒ¨å·²ç»å±€éƒ¨æœ‰åºï¼Œå¯ä»¥è®°å½•æœ€åä¾æ¬¡äº¤æ¢çš„ä½ç½®ï¼Œå‡å°‘æ¯”è¾ƒæ¬¡æ•°
     *  ä¸ºä»€ä¹ˆè¿™é‡ŒsortedIndexä¸º1ï¼ˆåªè¦ä¿è¯ eIndex-- > 0 å³å¯ï¼‰ï¼Ÿ
     *     => å¦‚æœsortedIndexä¸ºeIndexï¼Œå½“æ•°ç»„ç¬¬ä¸€æ¬¡å°±å®Œå…¨æœ‰åºæ—¶ï¼Œå°±é€€å›åˆ°æœ€åˆçš„ç‰ˆæœ¬äº†
     *     => å¦‚æœsortedIndexä¸º1ï¼Œå½“æ•°ç»„ç¬¬ä¸€æ¬¡å°±å®Œå…¨æœ‰åºæ—¶ï¼Œä¸€è½®æ‰«æå°±ç»“æŸäº†ï¼
     * 
     */
    @Override
    public void sort() {
        int sortedIndex;
        for (int eIndex = array.length - 1; eIndex > 0; eIndex--) {
            sortedIndex = 1; //è®°å½•æœ€åä¸€æ¬¡äº¤æ¢çš„ä¸‹æ ‡ä½ç½®
            for (int i = 1; i <= eIndex; i++) {
                if (cmp(i, i - 1) < 0) {
                    swap(i, i - 1);
                    sortedIndex = i;
                }
            }
            eIndex = sortedIndex;
        }
    }
}
```

### ç®—æ³•ä¼˜åŠ£

- æœ€åï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(n^2ï¼‰ï¼Œæœ€å¥½æ—¶é—´å¤æ‚åº¦ï¼šO(n)


- ç©ºé—´å¤æ‚åº¦ï¼šO(1)
- å±äºç¨³å®šæ’åº

> æ³¨æ„ï¼šç¨æœ‰ä¸æ…ï¼Œç¨³å®šçš„æ’åºç®—æ³•ä¹Ÿèƒ½è¢«å†™æˆä¸ç¨³å®šçš„æ’åºç®—æ³•ï¼Œå¦‚ä¸‹å†’æ³¡æ’åºæ˜¯ä¸ç¨³å®šçš„

```java
public void sort() {
    for (int eIndex = array.length - 1; eIndex > 0; eIndex--) {
        for (int i = 1; i <= eIndex; i++) {
            if (cmp(i, i - 1) <= 0) {
                swap(i, i - 1);
            }
        }
    }
}
```

- å±äºåŸåœ°ç®—æ³•

## é€‰æ‹©æ’åºï¼ˆSelection Sortï¼‰

### æ‰§è¡Œæµç¨‹

- ä»åºåˆ—ä¸­æ‰¾å‡ºæœ€å¤§çš„å“ªä¸ªå…ƒç´ ï¼Œç„¶åä¸æœ€æœ«å°¾çš„å…ƒç´ äº¤æ¢ä½ç½®ã€‚æ‰§è¡Œå®Œä¸€è½®åæœ€æœ«å°¾é‚£ä¸ªå…ƒç´ å°±æ˜¯æœ€å¤§çš„å…ƒç´ 
- å¿½ç•¥ç¬¬ä¸€æ­¥æ‰¾åˆ°çš„æœ€å¤§å…ƒç´ ï¼Œé‡å¤æ‰§è¡Œç¬¬ä¸€æ­¥

> è¿™é‡Œä»¥é€‰æœ€å°å…ƒç´ ä¸ºä¾‹

![](./images/20210131004436.gif)

### åŸºæœ¬å®ç°

```java
public class SelectionSort<T extends Comparable<T>> extends Sort<T> {
    @Override
    public void sort() {
        for (int eIndex = array.length - 1; eIndex > 0; eIndex--) {
            int maxIndex = 0;
            for (int i = 1; i <= eIndex; i++) {
                //æ³¨æ„ï¼šä¸ºäº†ç¨³å®šæ€§ï¼Œè¿™é‡Œè¦å†™ <=
                if (cmp(maxIndex, i) <= 0) {
                    maxIndex = i;
                }
            }
            if(maxIndex != eIndex) swap(maxIndex, eIndex);
        }
    }

}
```

### ç®—æ³•ä¼˜åŠ£

- é€‰æ‹©æ’åºçš„äº¤æ¢æ¬¡æ•°è¦è¿œå°‘äºå†’æ³¡æ’åºï¼Œå¹³å‡æ€§èƒ½ä¼˜äºå†’æ³¡æ’åº
- æœ€å¥½ï¼Œæœ€åï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦å‡ä¸ºO(n^2)ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(1)ï¼Œå±äºä¸ç¨³å®šæ’åº

> é€‰æ‹©æ’åºæ˜¯å¦è¿˜æœ‰ä¼˜åŒ–çš„ç©ºé—´ï¼Ÿ => ä½¿ç”¨å †æ¥é€‰æ‹©æœ€å¤§å€¼

## å †æ’åºï¼ˆHeap Sortï¼‰

å †æ’åºå¯ä»¥è®¤ä¸ºæ˜¯å¯¹é€‰æ‹©æ’åºçš„ä¸€ç§ä¼˜åŒ–

### æ‰§è¡Œæµç¨‹

- å¯¹åºåˆ—è¿›è¡ŒåŸåœ°å»ºå †ï¼ˆheapifyï¼‰
- é‡å¤æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼Œç›´åˆ°å †çš„å…ƒç´ æ•°é‡ä¸º1
  - äº¤æ¢å †é¡¶å…ƒç´ ä¸å°¾å…ƒç´ 
  - å †çš„å…ƒç´ æ•°é‡å‡1
  - å¯¹0ä½ç½®è¿›è¡Œä¸€æ¬¡siftDownæ“ä½œ

![](./images/20210130235458.png)

### åŸºæœ¬å®ç°

```java
public class HeapSort<T extends Comparable<T>> extends Sort<T> {
    /** è®°å½•å †æ•°æ® */
    private int heapSize;

    @Override
    protected void sort() {
        // åŸåœ°å»ºå †ï¼ˆç›´æ¥ä½¿ç”¨æ•°ç»„å»ºå †ï¼‰
        heapSize = array.length;
        for (int i = (heapSize >> 1) - 1; i >= 0; i--) {
            siftDown(i);
        }
        while (heapSize > 1) {
            // äº¤æ¢å †é¡¶å…ƒç´ å’Œå°¾éƒ¨å…ƒç´ 
            swap(0, --heapSize);

            // å¯¹0ä½ç½®è¿›è¡ŒsiftDownï¼ˆæ¢å¤å †çš„æ€§è´¨ï¼‰
            siftDown(0);
        }
    }

    /** å †åŒ– */
    private void siftDown(int index) {
        T element = array[index];

        int half = heapSize >> 1;
        while (index < half) { // indexå¿…é¡»æ˜¯éå¶å­èŠ‚ç‚¹
            // é»˜è®¤æ˜¯å·¦è¾¹è·Ÿçˆ¶èŠ‚ç‚¹æ¯”
            int childIndex = (index << 1) + 1;
            T child = array[childIndex];

            int rightIndex = childIndex + 1;
            // å³å­èŠ‚ç‚¹æ¯”å·¦å­èŠ‚ç‚¹å¤§
            if (rightIndex < heapSize &&
                    cmp(array[rightIndex], child) > 0) {
                child = array[childIndex = rightIndex];
            }

            // å¤§äºç­‰äºå­èŠ‚ç‚¹
            if (cmp(element, child) >= 0) break;

            array[index] = child;
            index = childIndex;
        }
        array[index] = element;
    }
}
```

### ç®—æ³•ä¼˜åŠ£

- æœ€å¥½ï¼Œæœ€åï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(nlog^n)


- ç©ºé—´å¤æ‚åº¦ï¼šO(1)
- å±äºä¸ç¨³å®šæ’åº

### å†’æ³¡ï¼Œé€‰æ‹©ï¼Œå †æ’åºæ¯”è¾ƒ

```java
@SuppressWarnings({"rawtypes","unchecked"})
public class SortTest {
    public static void main(String[] args) {
        Integer[] arr1 = Integers.random(10000, 1, 20000);
        testSort(arr1,
                new SelectionSort(),
                new HeapSort(),
                new BubbleSort());

    }

    static void testSort(Integer[] arr,Sort... sorts) {
        for (Sort sort: sorts) {
            Integer[] newArr = Integers.copy(arr);
            sort.sort(newArr);
            //æ£€æŸ¥æ’åºæ­£ç¡®æ€§
            Asserts.test(Integers.isAscOrder(newArr));
        }
        Arrays.sort(sorts);
        for (Sort sort: sorts) {
            System.out.println(sort);
        }
    }
}
```

![](./images/20210130235941.png)

## æ’å…¥æ’åºï¼ˆInsertion Sortï¼‰

### æ‰§è¡Œæµç¨‹

- åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ’å…¥æ’åºä¼šå°†åºåˆ—åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼ˆå¤´éƒ¨æ˜¯å·²ç»æ’å¥½åºçš„ï¼Œå°¾éƒ¨æ˜¯å¾…æ’åºçš„ï¼‰

- ä»å¤´å¼€å§‹æ‰«ææ¯ä¸€ä¸ªå…ƒç´ ï¼Œæ¯å½“æ‰«æåˆ°ä¸€ä¸ªå…ƒç´ ï¼Œå°±å°†å®ƒæ’å…¥åˆ°å¤´éƒ¨é€‚åˆçš„ä½ç½®ï¼Œä½¿å¾—å¤´éƒ¨æ•°æ®ä¾ç„¶ä¿æŒæœ‰åº

![](./images/20210131004820.gif)

### åŸºæœ¬å®ç°

```java
public class InsertionSort<T extends Comparable<T>> extends Sort<T> {
    @Override
    protected void sort() {
        for (int i = 1; i < array.length; i++) {
            int cur = i;
            while(cur > 0 && cmp(cur,cur - 1) < 0) {
                swap(cur,cur - 1);
                cur--;
            }
        }
    }
}
```

### é€†åºå¯¹ï¼ˆInversionï¼‰

**ä»€ä¹ˆæ˜¯é€†åºå¯¹ï¼Ÿ** => æ•°ç»„ [2,3,8,6,1] çš„é€†åºå¯¹ä¸ºï¼š<2,1> < 3,1> <8,1> <8,6> <6,1>

**æ’å…¥æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸é€†åºå¯¹çš„æ•°é‡æˆæ­£æ¯”å…³ç³»**

> æ—¶é—´å¤æ‚åº¦æœ€é«˜å¦‚ä¸‹ï¼šO(n^2)

![](./images/20210131010515.png)

### ä¼˜åŒ–ä¸€

**ä¼˜åŒ–æ€è·¯ => å°†äº¤æ¢æ”¹ä¸ºæŒªåŠ¨**

- å…ˆå°†å¾…æ’å…¥å…ƒç´ å¤‡ä»½

- å¤´éƒ¨æœ‰åºæ•°æ®ä¸­æ¯”å¾…æ’å…¥å…ƒç´ å¤§çš„ï¼Œéƒ½æœå°¾éƒ¨æ–¹å‘æŒªåŠ¨1ä¸ªä½ç½®

- å°†å¾…æ’å…¥å…ƒç´ æ”¾åˆ°æœ€ç»ˆåˆé€‚ä½ç½®

> æ³¨æ„ï¼šé€†åºå¯¹è¶Šå¤šï¼Œè¯¥ä¼˜åŒ–è¶Šæ˜æ˜¾

![](./images/20210131012202.png)

```java
public class InsertionSort<T extends Comparable<T>> extends Sort<T> {
    @Override
    protected void sort() {
        for (int i = 1; i < array.length; i++) {
            int cur = i;
            T val = array[cur];
            while(cur > 0 && cmp(val,array[cur - 1]) < 0) {
                array[cur] = array[cur - 1];//ä¼˜åŒ–é‡ç‚¹åœ¨è¿™é‡Œ
                cur--;
            }
            array[cur] = val;
        }
    }
}
```

### ä¼˜åŒ–äºŒ

**ä¼˜åŒ–æ€è·¯ => å°†äº¤æ¢æ”¹ä¸ºäºŒåˆ†æœç´¢**ï¼ˆè¾ƒå°‘æ¯”è¾ƒæ¬¡æ•°ï¼‰

**äºŒåˆ†æœç´¢ç†è§£**

å¦‚ä½•ç¡®å®šä¸€ä¸ªå…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä½ç½®ï¼Ÿï¼ˆå‡è®¾æ•°ç»„é‡Œå…¨æ˜¯æ•´æ•°ï¼‰

- å¦‚æœæ˜¯æ— åºæ•°ç»„ï¼Œä»ç¬¬ 0 ä¸ªä½ç½®å¼€å§‹éå†æœç´¢ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(n)

- å¦‚æœæ˜¯æœ‰åºæ•°ç»„ï¼Œå¯ä»¥ä½¿ç”¨äºŒåˆ†æœç´¢ï¼Œæœ€åæ—¶é—´å¤æ‚åº¦ï¼šO(log^n)

æ€è·¯

- å¦‚ä¸‹ï¼Œå‡è®¾åœ¨ [begin, end) èŒƒå›´å†…æœç´¢æŸä¸ªå…ƒç´  vï¼Œmid == (begin + end) / 2
- å¦‚æœ v < midï¼Œå» [begin,mid) èŒƒå›´å†…äºŒåˆ†æœç´¢
- å¦‚æœ v > midï¼Œå» [mid + 1,end) èŒƒå›´å†…äºŒåˆ†æœç´¢
- å¦‚æœ v == midï¼Œç›´æ¥è¿”å› mid

![](./images/20210131214729.png)

å®ä¾‹

![](./images/20210131215305.png)

```java
/** äºŒåˆ†æœç´¢-åŸºæœ¬å®ç°
 *      æŸ¥æ‰¾valåœ¨æœ‰åºæ•°ç»„arrä¸­çš„ä½ç½®ï¼Œæ‰¾ä¸åˆ°å°±è¿”å›-1
 */
private static int indexOf(Integer[] arr,int val) {
    if(arr == null || arr.length == 0) return -1;
    int begin = 0;
    //æ³¨æ„è¿™é‡Œendè®¾è®¡ä¸ºarr.lengthä¾¿äºæ±‚æ•°é‡ï¼ˆend - beginï¼‰
    int end = arr.length;
    while (begin < end) {
        int mid = (begin + end) >> 1;
        if(val < arr[mid]) {
            end = mid;
        } else if(val > arr[mid]) {
            begin = mid  + 1;
        } else {
            return mid;
        }
    }
    return -1;
}
```

**äºŒåˆ†æœç´¢(Binary Search)ä¼˜åŒ–å®ç°**

- ä¹‹å‰çš„æ’å…¥æ’åºä»£ç ï¼Œåœ¨å…ƒç´  val çš„æ’å…¥è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥å…ˆäºŒåˆ†æœç´¢å‡ºåˆé€‚çš„æ’å…¥ä½ç½®ï¼Œç„¶åå°†å…ƒç´  val æ’å…¥
- é€‚åˆäºæ’å…¥æ’åºçš„äºŒåˆ†æœç´¢å¿…é¡»æ»¡è¶³ï¼š<span style="color:red">è¦æ±‚äºŒåˆ†æœç´¢è¿”å›çš„æ’å…¥ä½ç½®æ˜¯ç¬¬1ä¸ªå¤§äº val çš„å…ƒç´ ä½ç½®</span>
  - å¦‚æœ val æ˜¯ 5 ï¼Œè¿”å› 2
  - å¦‚æœ val æ˜¯ 1ï¼Œè¿”å› 0
  - å¦‚æœ val æ˜¯15ï¼Œè¿”å› 7
  - å¦‚æœ val æ˜¯ 8ï¼Œè¿”å› 5

![](./images/20210131221938.png)

- å®ç°æ€è·¯
  - å‡è®¾åœ¨ [begin,end) èŒƒå›´å†…æœç´¢æŸä¸ªå…ƒç´  valï¼Œmid == (begin + end) / 2
  - å¦‚æœval < midï¼Œå» [begin,mid) èŒƒå›´å†…äºŒåˆ†æœç´¢
  - å¦‚æœval >= midï¼Œå» [mid + 1,end) èŒƒå›´å†…äºŒåˆ†æœç´¢
  - å½“ begin == end == xï¼Œx å°±æ˜¯å¾…æ’å…¥ä½ç½®
- å®ä¾‹

![](./images/20210131224559.png)

```java
/**
 * äºŒåˆ†æœç´¢-é€‚ç”¨äºæ’å…¥æ’åº
 *    æŸ¥æ‰¾valåœ¨æœ‰åºæ•°ç»„arrä¸­å¯ä»¥æ’å…¥çš„ä½ç½®
 *    è§„å®šï¼šè¦æ±‚äºŒåˆ†æœç´¢è¿”å›çš„æ’å…¥ä½ç½®æ˜¯ç¬¬1ä¸ªå¤§äº val çš„å…ƒç´ ä½ç½®
 */
private static int search(Integer[] arr,int val) {
    if(arr == null || arr.length == 0) return -1;
    int begin = 0;
    int end = arr.length;
    while (begin < end) {
        int mid = (begin + end) >> 1;
        if(val < arr[mid]) {
            end = mid;
        } else {
            begin = mid  + 1;
        }
    }
    return begin;
}
```

**æ’å…¥æ’åºæœ€ç»ˆå®ç°**

> æ³¨æ„ï¼šä½¿ç”¨äº†äºŒåˆ†æœç´¢åï¼Œåªæ˜¯å‡å°‘äº†æ¯”è¾ƒæ¬¡æ•°ï¼Œä½†æ’å…¥æ’åºçš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¾ç„¶æ˜¯O(n^2)

```java
public class InsertionSort<T extends Comparable<T>> extends Sort<T> {
 
    /** ä¼˜åŒ– => äºŒåˆ†æœç´¢ */
    @Override
    protected void sort() {
        for (int begin = 1; begin < array.length; begin++) {
            //è¿™é‡Œä¸ºä»€ä¹ˆä¼ ç´¢å¼•è€Œä¸æ˜¯ä¼ å€¼ï¼Ÿ
            // => ä¼ ç´¢å¼•è¿˜å¯ä»¥çŸ¥é“å‰é¢å·²ç»æ’å¥½åºçš„æ•°ç»„åŒºé—´ï¼š[0,i)
            insert(begin,search(begin));
        }
     }

    /** å°†sourceä½ç½®çš„å…ƒç´ æ’å…¥åˆ°destä½ç½® */
    private void insert(int source,int dest) {
         //å°†[dest,source)èŒƒå›´å†…çš„å…ƒç´ å¾€å³è¾¹æŒªåŠ¨ä¸€ä½
         T val = array[source];
         for (int i = source; i > dest; i--) {
             array[i] = array[i - 1];
         }
         //æ’å…¥
         array[dest] = val;
    }

    private int search(int index) {
        T val = array[index];
        int begin = 0;
        int end = index;
        while (begin < end) {
            int mid = (begin + end) >> 1;
            if(cmp(val,array[mid]) < 0) {
                end = mid;
            } else {
                begin = mid  + 1;
            }
        }
        return begin;
    }
}
```

### ç®—æ³•ä¼˜åŠ£

![](./images/20210131231517.png)

- æœ€åï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º O(n^2)ï¼Œæœ€å¥½æ—¶é—´å¤æ‚åº¦ä¸º O(n)
- ç©ºé—´å¤æ‚åº¦ä¸º O(1)
- å±äºç¨³å®šæ’åº

## å½’å¹¶æ’åºï¼ˆMerge Sortï¼‰

### æ‰§è¡Œæµç¨‹

- ä¸æ–­çš„å°†å½“å‰åºåˆ—å¹³å‡åˆ†å‰²æˆ 2 ä¸ªå­åºåˆ—ï¼Œç›´åˆ°ä¸èƒ½å†åˆ†å‰²ï¼ˆåºåˆ—ä¸­åªå‰©ä¸€ä¸ªå…ƒç´ ï¼‰
- ä¸æ–­çš„å°† 2 ä¸ªå­åºåˆ—åˆå¹¶æˆä¸€ä¸ªæœ‰åºåºåˆ—ï¼Œç›´åˆ°æœ€ç»ˆåªå‰©ä¸‹ 1 ä¸ªæœ‰åºåºåˆ—

![](./images/20210131233435.gif)

![](./images/20210131234043.png)

### æ€è·¯

**merge**

å¤§è‡´æƒ³æ³•

![](./images/20210201001248.png)

ç»†èŠ‚

- éœ€è¦ merge çš„ 2 ç»„åºåˆ—å­˜åœ¨äºåŒä¸€ä¸ªæ•°ç»„ä¸­ï¼Œå¹¶ä¸”æ˜¯æŒ¨åœ¨ä¸€èµ·çš„

![](./images/20210201001738.png)

- ä¸ºäº†æ›´å¥½çš„å®Œæˆ merge æ“ä½œï¼Œæœ€å¥½å°†å…¶ä¸­ 1 ç»„åºåˆ—å¤‡ä»½å‡ºæ¥ï¼Œæ¯”å¦‚ [begin,mid)

![](./images/20210201002214.png)

- åŸºæœ¬å®ç°

![](./images/20210201002810.png)

- æƒ…å†µä¸€ï¼šå·¦è¾¹å…ˆç»“æŸ => å·¦è¾¹ä¸€ç»“æŸæ•´ä¸ªå½’å¹¶å°±ç»“æŸ

![](./images/20210201003223.png)

- æƒ…å†µäºŒï¼šå³è¾¹å…ˆç»“æŸ => å³è¾¹ä¸€ç»“æŸå°±ç›´æ¥å°†å·¦è¾¹æŒ‰é¡ºåºæŒªåˆ°å³è¾¹å»

![](./images/20210201003620.png)

### åŸºæœ¬å®ç°

```java
/**
 * @Description å½’å¹¶æ’åº
 * @Author monap
 * @Date 2022/1/11 23:07
 */
@SuppressWarnings("unchecked")
public class MergeSort<T extends Comparable<T>> extends Sort<T> {
    private T[] leftArr;

    @Override
    protected void sort() {
        leftArr = (T[]) new Comparable[array.length >> 1];
        sort(0, array.length);
    }

    /**
     * å¯¹ [begin,end)èŒƒå›´çš„åºåˆ—è¿›è¡Œå½’å¹¶æ’åº
     */
    private void sort(int begin, int end) {
        // å…ƒç´ æ•°é‡åªæœ‰ä¸€ä¸ªæˆ–åˆ™æ²¡æœ‰åˆ™è¿”å›
        if (end - begin < 2) return;
        int mid = (end + begin) >> 1;
        sort(begin, mid);
        sort(mid, end);
        merge(begin, mid, end);
    }

    /**
     * å°† [begin,mid) å’Œ [mid,end) èŒƒå›´çš„åºåˆ—åˆå¹¶æˆä¸€ä¸ªæœ‰åºåºåˆ—
     */
    private void merge(int begin, int mid, int end) {
        int li = 0, le = mid - begin;
        int ri = mid, re = end;
        int ai = begin;
        // å¤‡ä»½å·¦è¾¹æ•°ç»„
        for (int i = li; i < le; i++) {
            leftArr[i] = array[begin + i];
        }
        //å¦‚æœå·¦è¾¹è¿˜æ²¡æœ‰ç»“æŸï¼ˆæƒ…å†µä¸€ï¼‰
        while (li < le) {
            //å½“ ri < re ä¸æˆç«‹ï¼Œå°±ä¼šä¸€ç›´leftArræŒªåŠ¨ï¼ˆæƒ…å†µäºŒï¼‰
            if (ri < re && cmp(array[ri], leftArr[li]) < 0) {
                array[ai++] = array[ri++];
            } else {
                array[ai++] = leftArr[li++];
            }
        }
    }
}
```

### ç®—æ³•ä¼˜åŠ£

![](./images/20210201013107.png)

å¤æ‚åº¦åˆ†æ

```java
T(n) = sort() + sort() + merge()
=> T(n) = T(n/2) + T(n/2) + O(n)
=> T(n) = 2T(n/2) + O(n)
    
//ç”±äºsort()æ˜¯é€’å½’è°ƒç”¨ï¼Œç”¨Tè¡¨ç¤ºï¼Œç”±äºT(n/2)ä¸å¥½ä¼°ç®—ï¼Œç°åœ¨è¦ç†æ¸…T(n)ä¸O(n)ä¹‹é—´çš„å…³ç³»
T(1) = O(1)
T(n)/n = T(n/2) / (n/2) + O(1)
    
//ä»¤S(n) = T(n)/n     
S(1) = O(1) 
S(n) = S(n/2) + O(1) 
     = S(n/4) + O(2)
     = S(n/8) + O(3)
     = S( n/(2^k) ) + O(k)
     = S(1) + O(log^n)
     = O(lon^n)
T(n) = n*S(n) = O(nlog^n)
    

=> å½’å¹¶æ’åºæ—¶é—´å¤æ‚åº¦ï¼šO(nlog^n)
```

å¸¸è§é€’æ¨å¼

![](./images/20210201013429.png)

æ€»ç»“

- ç”±äºå½’å¹¶æ’åºæ€»æ˜¯å¹³å‡åˆ†å‰²å­åºåˆ—ï¼Œæ‰€ä»¥æœ€å¥½ï¼Œæœ€åï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ï¼šO(nlog^n)


- ç©ºé—´å¤æ‚åº¦ï¼šO(n/2 + log^n) = O(n)ï¼Œn/2ç”¨äºä¸´æ—¶å­˜æ”¾å·¦ä¾§æ•°ç»„ï¼Œlog^nç”¨äºé€’å½’è°ƒç”¨
- å±äºç¨³å®šæ’åº

## å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰

### æ‰§è¡Œæµç¨‹

ä»åºåˆ—ä¸­é€‰æ‹©ä¸€ä¸ªè½´ç‚¹å…ƒç´ ï¼ˆpivotï¼‰

- å‡è®¾æ¯æ¬¡é€‰æ‹© 0 ä½ç½®çš„å…ƒç´ ä¸ºè½´ç‚¹å…ƒç´  

åˆ©ç”¨ pivot å°†åºåˆ—åˆ†å‰²æˆ 2 ä¸ªå­åºåˆ—

- å°†å°äº pivot çš„å…ƒç´ æ”¾åœ¨pivotå‰é¢ï¼ˆå·¦ä¾§ï¼‰
- å°†å¤§äº pivot çš„å…ƒç´ æ”¾åœ¨pivotåé¢ï¼ˆå³ä¾§ï¼‰
- ç­‰äºpivotçš„å…ƒç´ æ”¾å“ªè¾¹éƒ½å¯ä»¥

å¯¹å­åºåˆ—è¿›è¡Œ â‘  â‘¡ æ“ä½œï¼Œç›´åˆ°ä¸èƒ½å†åˆ†å‰²ï¼ˆå­åºåˆ—ä¸­åªå‰©ä¸‹1ä¸ªå…ƒç´ ï¼‰

![](./images/20220112002022.png)

å¿«é€Ÿæ’åºçš„æœ¬è´¨ï¼š<span style="color:red">é€æ¸å°†æ¯ä¸€ä¸ªå…ƒç´ éƒ½è½¬æ¢æˆè½´ç‚¹å…ƒç´ </span>

### è½´ç‚¹æ„é€ 

![](./images/20220112002119.png)

### æ—¶é—´å¤æ‚åº¦

åœ¨è½´ç‚¹å·¦å³å…ƒç´ æ•°é‡æ¯”è¾ƒå‡åŒ€çš„æƒ…å†µä¸‹ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æœ€å¥½çš„æƒ…å†µ

```shell
T(n) = 2 âˆ— T(n/2) + O(n) = O(nlogn) 
```

å¦‚æœè½´ç‚¹å·¦å³å…ƒç´ æ•°é‡æåº¦ä¸å‡åŒ€ï¼Œæœ€åæƒ…å†µ

```shell
T(n) = T(nâˆ’1) + O(n) = O(n^2)
```

![](./images/20220112235355.png)

ä¸ºäº†é™ä½æœ€åæƒ…å†µçš„å‡ºç°æ¦‚ç‡ï¼Œä¸€èˆ¬é‡‡å–çš„åšæ³•æ˜¯ï¼šéšæœºé€‰æ‹©è½´ç‚¹å…ƒç´ 

### åŸºæœ¬å®ç°

```java
/**
 * @Description å¿«é€Ÿæ’åº
 * @Author monap
 * @Date 2022/1/12 0:57
 */
public class QuickSort<T extends Comparable<T>> extends Sort<T> {
    @Override
    protected void sort() {
        sort(0, array.length);
    }

    /**
     * å¯¹[begin,end)èŒƒå›´çš„åºåˆ—è¿›è¡Œå¿«é€Ÿæ’åº
     */
    private void sort(int begin, int end) {
        if (end - begin < 2) return;
        // ç¡®å®šè½´ç‚¹ä½ç½®
        int mid = pivotIndex(begin, end);
        // å¯¹å­åºåˆ—è¿›è¡Œå¿«é€Ÿæ’åº
        sort(begin, mid);
        sort(mid + 1, end);
    }

    /**
     * æ„é€ å‡º[begin,end)èŒƒå›´çš„è½´ç‚¹ä½ç½®
     */
    private int pivotIndex(int begin, int end) {
        // åœ¨[begin,end)ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªå…ƒç´ è·Ÿbeginä½ç½®è¿›è¡Œäº¤æ¢
        swap(begin, begin + (int) (Math.random() * (end - begin)));
        
        // å¤‡ä»½beginä½ç½®çš„å…ƒç´ 
        T pivotValue = array[begin];
        // endæŒ‡å‘æœ€åä¸€ä¸ªå…ƒç´ 
        end--;
        while (begin < end) {
            while (begin < end) {
                if (cmp(pivotValue, array[end]) < 0) { // å³è¾¹å…ƒç´  > è½´ç‚¹å…ƒç´ 
                    end--;
                } else { // å³è¾¹å…ƒç´  <= è½´ç‚¹å…ƒç´ 
                    array[begin++] = array[end];
                    break;
                }
            }
            while (begin < end) {
                if (cmp(pivotValue, array[begin]) > 0) { // å³è¾¹å…ƒç´  < è½´ç‚¹å…ƒç´ 
                    begin++;
                } else {
                    array[end--] = array[begin]; // å³è¾¹å…ƒç´  >= è½´ç‚¹å…ƒç´ 
                    break;
                }
            }
        }
        // å°†è½´ç‚¹å…ƒç´ æ”¾å…¥æœ€ç»ˆçš„ä½ç½®
        array[begin] = pivotValue;
        // è¿”å›è½´ç‚¹å…ƒç´ çš„ä½ç½®
        return begin;
    }
}
```

æ€»ç»“ï¼š

- æœ€å¥½ã€å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(nlogn) 
- æœ€åæ—¶é—´å¤æ‚åº¦ï¼šO(n^2 )
- ç”±äºé€’å½’è°ƒç”¨çš„ç¼˜æ•…ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(logn) 
- å±äºä¸ç¨³å®šæ’åº

### ä¸è½´ç‚¹ç›¸ç­‰çš„å…ƒç´ 

å¦‚æœåºåˆ—ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½ä¸è½´ç‚¹å…ƒç´ ç›¸ç­‰ï¼Œåˆ©ç”¨ç›®å‰çš„ç®—æ³•å®ç°ï¼Œè½´ç‚¹å…ƒç´ å¯ä»¥å°†åºåˆ—åˆ†å‰²æˆ 2 ä¸ªå‡åŒ€çš„å­åºåˆ—

![](./images/20220112002517.png)

æ€è€ƒï¼šcmp ä½ç½®çš„åˆ¤æ–­åˆ†åˆ«æ”¹ä¸º â‰¤ã€â‰¥ ä¼šèµ·åˆ°ä»€ä¹ˆæ•ˆæœï¼Ÿ

=> è½´ç‚¹å…ƒç´ åˆ†å‰²å‡ºæ¥çš„å­åºåˆ—æåº¦ä¸å‡åŒ€ï¼Œå¯¼è‡´å‡ºç°æœ€åæ—¶é—´å¤æ‚åº¦ O(n^2 )

![](./images/20220112002624.png)

## å¸Œå°”æ’åºï¼ˆShell Sortï¼‰

### ç†è§£

å¸Œå°”æ’åºæŠŠåºåˆ—çœ‹ä½œæ˜¯ä¸€ä¸ªçŸ©é˜µï¼Œåˆ†æˆ ğ‘š åˆ—ï¼Œé€åˆ—è¿›è¡Œæ’åº

- ğ‘š ä»æŸä¸ªæ•´æ•°é€æ¸å‡ä¸º1
- å½“ ğ‘š ä¸º1æ—¶ï¼Œæ•´ä¸ªåºåˆ—å°†å®Œå…¨æœ‰åº

å› æ­¤ï¼Œå¸Œå°”æ’åºä¹Ÿè¢«ç§°ä¸ºé€’å‡å¢é‡æ’åºï¼ˆDiminishing Increment Sortï¼‰

çŸ©é˜µçš„åˆ—æ•°å–å†³äºæ­¥é•¿åºåˆ—ï¼ˆstep sequenceï¼‰

- æ¯”å¦‚ï¼Œå¦‚æœæ­¥é•¿åºåˆ—ä¸º `{1,5,19,41,109,...}`ï¼Œå°±ä»£è¡¨ä¾æ¬¡åˆ†æˆ109åˆ—ã€41åˆ—ã€19åˆ—ã€5åˆ—ã€1åˆ—è¿›è¡Œæ’åº
- ä¸åŒçš„æ­¥é•¿åºåˆ—ï¼Œæ‰§è¡Œæ•ˆç‡ä¹Ÿä¸åŒ

### å®ä¾‹

å¸Œå°”æœ¬äººç»™å‡ºçš„æ­¥é•¿åºåˆ—æ˜¯ ğ‘›/2 ğ‘˜ï¼Œæ¯”å¦‚ ğ‘› ä¸º16æ—¶ï¼Œæ­¥é•¿åºåˆ—æ˜¯ `{1, 2, 4, 8}`

![](./images/20220112002816.png)

åˆ†æˆ8åˆ—è¿›è¡Œæ’åº

![](./images/20220112002840.png)

åˆ†æˆ4åˆ—è¿›è¡Œæ’åº

![](./images/20220112002906.png)

åˆ†æˆ2åˆ—è¿›è¡Œæ’åº

![](./images/20220112002934.png)

åˆ†æˆ1åˆ—è¿›è¡Œæ’åº

![](./images/20220112002957.png)

ä¸éš¾çœ‹å‡ºæ¥ï¼Œä»8åˆ— å˜ä¸º 1åˆ—çš„è¿‡ç¨‹ä¸­ï¼Œé€†åºå¯¹çš„æ•°é‡åœ¨é€æ¸å‡å°‘ï¼Œå› æ­¤å¸Œå°”æ’åºåº•å±‚ä¸€èˆ¬ä½¿ç”¨æ’å…¥æ’åºå¯¹æ¯ä¸€åˆ—è¿›è¡Œæ’åºï¼Œä¹Ÿæœ‰äººè®¤ä¸ºå¸Œå°”æ’åºæ˜¯æ’å…¥æ’åºçš„æ”¹è¿›ç‰ˆ

### ä¸¾ä¾‹

 å‡è®¾æœ‰11ä¸ªå…ƒç´ ï¼Œæ­¥é•¿åºåˆ—æ˜¯ `{1, 2, 5}`

![](./images/20220112003110.png)

å‡è®¾å…ƒç´ åœ¨ç¬¬ col åˆ—ã€ç¬¬ row è¡Œï¼Œæ­¥é•¿ï¼ˆæ€»åˆ—æ•°ï¼‰æ˜¯ step

- é‚£ä¹ˆè¿™ä¸ªå…ƒç´ åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•æ˜¯ col + row * step
- æ¯”å¦‚ 9 åœ¨æ’åºå‰æ˜¯ç¬¬ 2 åˆ—ã€ç¬¬ 0 è¡Œï¼Œé‚£ä¹ˆå®ƒæ’åºå‰çš„ç´¢å¼•æ˜¯ 2 + 0 * 5 = 2
- æ¯”å¦‚ 4 åœ¨æ’åºå‰æ˜¯ç¬¬ 2 åˆ—ã€ç¬¬ 1 è¡Œï¼Œé‚£ä¹ˆå®ƒæ’åºå‰çš„ç´¢å¼•æ˜¯ 2 + 1 * 5 = 7

### å®ç°

æœ€å¥½æƒ…å†µæ˜¯æ­¥é•¿åºåˆ—åªæœ‰1ï¼Œä¸”åºåˆ—å‡ ä¹æœ‰åºï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n)

ç©ºé—´å¤æ‚åº¦ä¸ºO(1)ï¼Œå±äºä¸ç¨³å®šæ’åº

```java
/**
 * @Description å¸Œå°”æ’åº
 * @Author monap
 * @Date 2022/1/13 0:35
 */
public class ShellSort<T extends Comparable<T>> extends Sort<T> {

    @Override
    protected void sort() {
        List<Integer> stepSequence = shellStepSequence();
        for (Integer step : stepSequence) {
            sort(step);
        }
    }

    /**
     * åˆ†æˆstepåˆ—è¿›è¡Œæ’åº
     */
    private void sort(int step) {
        for (int col = 0; col < step; col++) { // å¯¹colåˆ—è¿›è¡Œæ’åº
            // å¯¹colã€col+stepã€col+2stepã€col+3stepã€... è¿›è¡Œæ’å…¥æ’åº
            for (int i = col + step; i < array.length; i += step) {
                int curIndex = i;
                while (curIndex > col && cmp(curIndex, curIndex - step) < 0) {
                    swap(curIndex, curIndex - step);
                    curIndex -= step;
                }
            }
        }
    }

    /**
     * å¸Œå°”æœ¬äººç»™å‡ºçš„æ­¥é•¿åºåˆ—
     */
    private List<Integer> shellStepSequence() {
        List<Integer> stepSequence = new ArrayList<>();
        int step = array.length;
        while ((step >>= 1) > 0) {
            stepSequence.add(step);
        }
        return stepSequence;
    }
}
```

### æœ€ä¼˜æ­¥é•¿åºåˆ—

å¸Œå°”æœ¬äººç»™å‡ºçš„æ­¥é•¿åºåˆ—ï¼Œæœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦æ˜¯ O(n^2 )

ç›®å‰å·²çŸ¥çš„æœ€å¥½çš„æ­¥é•¿åºåˆ—ï¼Œæœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦æ˜¯ O(n^4/3 ) ï¼Œ1986å¹´ç”±Robert Sedgewickæå‡º

![](./images/20220112003342.png)

```java
/**
 * sedgewickç»™å‡ºçš„æ­¥é•¿åºåˆ—
 */
private List<Integer> sedgewickSequence() {
    List<Integer> stepSequence = new LinkedList<>();
    int k = 0, step = 0;
    while (true) {
        if (k % 2 == 0) {
            int pow = (int) Math.pow(2, k >> 1);
            step = 1 + 9 * (pow * pow - pow);
        } else {
            int pow1 = (int) Math.pow(2, (k - 1) >> 1);
            int pow2 = (int) Math.pow(2, (k + 1) >> 1);
            step = 1 + 8 * pow1 * pow2 - 6 * pow2;
        }
        if (step >= array.length) break;
        stepSequence.add(0, step);
        k++;
    }
    return stepSequence;
}
```

## è®¡æ•°æ’åºï¼ˆCounting Sortï¼‰

### ç†è§£

ä¹‹å‰çš„å†’æ³¡ã€é€‰æ‹©ã€æ’å…¥ã€å½’å¹¶ã€å¿«é€Ÿã€å¸Œå°”ã€å †æ’åºï¼Œéƒ½æ˜¯åŸºäºæ¯”è¾ƒçš„æ’åºï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦ç›®å‰æœ€ä½æ˜¯ O(nlogn)

è®¡æ•°æ’åºã€æ¡¶æ’åºã€åŸºæ•°æ’åºï¼Œéƒ½ä¸æ˜¯åŸºäºæ¯”è¾ƒçš„æ’åºï¼Œå®ƒä»¬æ˜¯å…¸å‹çš„ç”¨ç©ºé—´æ¢æ—¶é—´ï¼Œåœ¨æŸäº›æ—¶å€™ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦å¯ä»¥æ¯” O(nlogn) æ›´ä½

è®¡æ•°æ’åºäº1954å¹´ç”±Harold H. Sewardæå‡ºï¼Œé€‚åˆå¯¹ä¸€å®šèŒƒå›´å†…çš„æ•´æ•°è¿›è¡Œæ’åº

è®¡æ•°æ’åºçš„æ ¸å¿ƒæ€æƒ³ï¼š<span style="color:red">ç»Ÿè®¡æ¯ä¸ªæ•´æ•°åœ¨åºåˆ—ä¸­å‡ºç°çš„æ¬¡æ•°ï¼Œè¿›è€Œæ¨å¯¼å‡ºæ¯ä¸ªæ•´æ•°åœ¨æœ‰åºåºåˆ—ä¸­çš„ç´¢å¼•</span>

### æœ€ç®€å•çš„å®ç°

![](./images/20220112003535.png)

è¿™ä¸ªç‰ˆæœ¬çš„å®ç°å­˜åœ¨ä»¥ä¸‹é—®é¢˜

- æ— æ³•å¯¹è´Ÿæ•´æ•°è¿›è¡Œæ’åº
- æå…¶æµªè´¹å†…å­˜ç©ºé—´
- æ˜¯ä¸ªä¸ç¨³å®šçš„æ’åº

```java
/**
 * @Description è®¡æ•°æ’åº,åªèƒ½å¯¹éè´Ÿæ•´æ•°è¿›è¡Œæ’åº
 * @Author monap
 * @Date 2022/1/13 1:32
 */
public class CountingSort extends Sort<Integer> {
    @Override
    protected void sort() {
        // æ‰¾å‡ºæœ€å¤§å€¼
        int max = array[0];
        for (int i = 1; i < array.length; i++) {
            if (array[i] > max) {
                max = array[i];
            }
        }
        // å¼€è¾Ÿå†…å­˜ç©ºé—´ï¼Œå­˜å‚¨æ¯ä¸ªæ•´æ•°å‡ºç°çš„æ¬¡æ•°
        int[] counts = new int[1 + max];
        // ç»Ÿè®¡æ¯ä¸ªæ•´æ•°å‡ºç°çš„æ¬¡æ•°
        for (int i = 0; i < array.length; i++) {
            counts[array[i]]++;
        }
        // æ ¹æ®æ•´æ•°å‡ºç°æ¬¡æ•°ï¼Œå¯¹æ•´æ•°è¿›è¡Œæ’åº
        int index = 0;
        for (int i = 0; i < counts.length; i++) {
            while (counts[i]-- > 0) {
                array[index++] = i;
            }
        }
    }
}
```

### æ”¹è¿›æ€è·¯

![](./images/20220112003751.png)

å‡è®¾arrayä¸­çš„æœ€å°å€¼æ˜¯ min

- arrayä¸­çš„å…ƒç´  k å¯¹åº”çš„ counts ç´¢å¼•æ˜¯ k â€“ min

- arrayä¸­çš„å…ƒç´  k åœ¨æœ‰åºåºåˆ—ä¸­çš„ç´¢å¼•ä¸º counts[k â€“ min] â€“ pï¼ˆp ä»£è¡¨ç€æ˜¯å€’æ•°ç¬¬å‡ ä¸ª kï¼‰

  - æ¯”å¦‚å…ƒç´  8 åœ¨æœ‰åºåºåˆ—ä¸­çš„ç´¢å¼•ä¸º counts[8 â€“ 3] â€“ 1ï¼Œç»“æœä¸º 7

  - å€’æ•°ç¬¬ 1 ä¸ªå…ƒç´  7 åœ¨æœ‰åºåºåˆ—ä¸­çš„ç´¢å¼•ä¸º counts[7 â€“ 3] â€“ 1ï¼Œç»“æœä¸º 6

  - å€’æ•°ç¬¬ 2 ä¸ªå…ƒç´  7 åœ¨æœ‰åºåºåˆ—ä¸­çš„ç´¢å¼•ä¸º counts[7 â€“ 3] â€“ 2ï¼Œç»“æœä¸º 5

å›¾ç¤ºï¼šä»å³å‘å·¦å¼€å§‹éå†åŸæ•°ç»„

> ä¸ºä»€ä¹ˆä»å³å‘å·¦éå†ï¼Ÿ=> ä»å³å‘å·¦éå†å¯ä»¥ä¿è¯ç¨³å®šæ€§ï¼

![](./images/20220112003815.png)



![](./images/20220112003840.png)



![](./images/20220112003859.png)



![](./images/20220112003938.png)



![](./images/20220112004004.png)

### æ”¹è¿›å®ç°

- æœ€å¥½ã€æœ€åã€å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(n + k)ï¼Œkä¸ºæ•´æ•°çš„å–å€¼èŒƒå›´
- ç©ºé—´å¤æ‚åº¦ï¼šO(n + k)
- k æ˜¯æ•´æ•°çš„å–å€¼èŒƒå›´
- å±äºç¨³å®šæ’åº

```java
/**
 * @Description è®¡æ•°æ’åºä¼˜åŒ–
 * @Author monap
 * @Date 2022/1/20 22:23
 */
public class CountingSort1 extends Sort<Integer> {
    @Override
    protected void sort() {
        // æ‰¾å‡ºæœ€å€¼
        int max = array[0];
        int min = array[0];
        for (int i = 1; i < array.length; i++) {
            if (array[i] > max) {
                max = array[i];
            }
            if (array[i] < min) {
                min = array[i];
            }
        }
        // å¼€è¾Ÿå†…å­˜ç©ºé—´ï¼Œå­˜å‚¨æ¬¡æ•°(å½“å‰å€¼çš„æ¬¡æ•°åŠ ä¸Šå‰é¢å€¼çš„ç´¯åŠ æ¬¡æ•°)
        int[] counts = new int[max - min + 1];
        // ç»Ÿè®¡æ¯ä¸ªæ•´æ•°å‡ºç°çš„æ¬¡æ•°
        for (Integer a : array) {
            counts[a - min]++;
        }
        // ç´¯åŠ æ¬¡æ•°
        for (int i = 1; i < counts.length; i++) {
            counts[i] += counts[i - 1];
        }
        // ä»å·¦å‘å³éå†åŸæ•°ç»„ï¼Œå°†å®ƒæ”¾å…¥æœ‰åºæ•°ç»„ä¸­çš„åˆé€‚ä½ç½®
        int[] newArray = new int[array.length];
        for (int i = array.length - 1; i >= 0; i--) {
            newArray[--counts[array[i] - min]] = array[i];
        }
        // å°†æœ‰åºæ•°ç»„å¤åˆ¶åˆ°array
        for (int i = 0; i < newArray.length; i++) {
            array[i] = newArray[i];
        }
    }
}
```

### å¯¹è‡ªå®šä¹‰å¯¹è±¡è¿›è¡Œæ’åº

å¦‚æœè‡ªå®šä¹‰å¯¹è±¡å¯ä»¥æä¾›ç”¨ä»¥æ’åºçš„æ•´æ•°ç±»å‹ï¼Œä¾ç„¶å¯ä»¥ä½¿ç”¨è®¡æ•°æ’åº

## åŸºæ•°æ’åºï¼ˆRadix Sortï¼‰

### ç†è§£

åŸºæ•°æ’åºéå¸¸é€‚åˆç”¨äºæ•´æ•°æ’åºï¼ˆå°¤å…¶æ˜¯éè´Ÿæ•´æ•°ï¼‰ï¼Œå› æ­¤è¿™é‡Œåªæ¼”ç¤ºå¯¹éè´Ÿæ•´æ•°è¿›è¡ŒåŸºæ•°æ’åº

æ‰§è¡Œæµç¨‹ï¼šä¾æ¬¡å¯¹ä¸ªä½æ•°ã€åä½æ•°ã€ç™¾ä½æ•°ã€åƒä½æ•°ã€ä¸‡ä½æ•°...è¿›è¡Œæ’åºï¼ˆä»ä½ä½åˆ°é«˜ä½ï¼‰

![](./images/20220112004159.png)

ä¸ªä½æ•°ã€åä½æ•°ã€ç™¾ä½æ•°çš„å–å€¼èŒƒå›´éƒ½æ˜¯å›ºå®šçš„0~9ï¼Œå¯ä»¥ä½¿ç”¨è®¡æ•°æ’åºå¯¹å®ƒä»¬è¿›è¡Œæ’åº

> æ€è€ƒï¼šå¦‚æœå…ˆå¯¹é«˜ä½æ’åºï¼Œå†å¯¹ä½ä½æ’åºï¼Œæ˜¯å¦å¯è¡Œï¼Ÿ
>
> => ä¸è¡Œï¼Œé«˜ä½æ•°æƒé‡æ›´é«˜ï¼

### å®ç°

- æœ€å¥½ã€æœ€åã€å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(d âˆ— (n + k)) ï¼Œd æ˜¯æœ€å¤§å€¼çš„ä½æ•°ï¼Œk æ˜¯è¿›åˆ¶ã€‚
- å±äºç¨³å®šæ’åº
- ç©ºé—´å¤æ‚åº¦ï¼šO(n + k)ï¼Œk æ˜¯è¿›åˆ¶

```java
/**
 * @Description åŸºæ•°æ’åº
 * @Author monap
 * @Date 2022/1/20 22:54
 */
public class RadixSort extends Sort<Integer> {
    @Override
    protected void sort() {
        // æ‰¾å‡ºæœ€å¤§å€¼
        int max = array[0];
        for (int i = 1; i < array.length; i++) {
            if (array[i] > max) {
                max = array[i];
            }
        }
        /*
         * ç™¾ä½æ•°ï¼š array[i] / 100 % 10 = 5
         * åä½æ•°ï¼š array[i] / 10 % 10 = 9
         * ä¸ªä½æ•°ï¼š array[i] / 1 % 10 = 3
         */
        for (int divider = 1; divider <= max; divider *= 10) {
            countingSort(divider);
        }
    }

    /**
     * å¯¹å–å€¼èŒƒå›´ä¸º 0~9 çš„åºåˆ—è¿›è¡Œè®¡æ•°æ’åº
     */
    private void countingSort(int divider) {
        // å¼€è¾Ÿå†…å­˜ç©ºé—´ï¼Œå­˜å‚¨æ¬¡æ•°(å½“å‰å€¼çš„æ¬¡æ•°åŠ ä¸Šå‰é¢å€¼çš„ç´¯åŠ æ¬¡æ•°)
        int[] counts = new int[10]; // 9 - 0 + 1
        // ç»Ÿè®¡æ¯ä¸ªæ•´æ•°å‡ºç°çš„æ¬¡æ•°
        for (Integer a : array) {
            counts[a / divider % 10]++;
        }
        // ç´¯åŠ æ¬¡æ•°
        for (int i = 1; i < counts.length; i++) {
            counts[i] += counts[i - 1];
        }
        // ä»å·¦å‘å³éå†åŸæ•°ç»„ï¼Œå°†å®ƒæ”¾å…¥æœ‰åºæ•°ç»„ä¸­çš„åˆé€‚ä½ç½®
        int[] newArray = new int[array.length];
        for (int i = array.length - 1; i >= 0; i--) {
            newArray[--counts[array[i] / divider % 10]] = array[i];
        }
        // å°†æœ‰åºæ•°ç»„å¤åˆ¶åˆ°array
        for (int i = 0; i < newArray.length; i++) {
            array[i] = newArray[i];
        }
    }
}
```

### å¦ä¸€ç§æ€è·¯

- å¼€è¾Ÿåä¸ªæ•°ç»„å¹¶ç¼–å·ä¸º0~9ï¼Œå¦‚ä¸‹å›¾ç«–ç€æ”¾çš„åä¸ªæ•°ç»„ã€‚

- éå†åŸæ•°ç»„çš„nè¿›åˆ¶ä½çš„æ•°ï¼ˆå¦‚ä¸ªä½æ•°ï¼Œåä½æ•°ï¼Œç™¾ä½æ•°...ï¼‰ä¾æ¬¡æ”¾å…¥å¯¹åº”æ•°ç»„ç¼–å·çš„æ•°ç»„ä¸­å»ã€‚
- æ¯æŒ‰è¿›åˆ¶ä½éå†å®Œä¸€æ¬¡åï¼Œå°†æ–°æ•°ç»„æŒ‰ç¼–å·å°†å€¼ä¾æ¬¡æ”¾å›åŸæ•°ç»„ä¸­
- é‡å¤æœ€å¤§äºŒè¿›åˆ¶æ¬¡ï¼Œåˆ™åºåˆ—æœ‰åºï¼

![](./images/20220112004316.png)

### å¦ä¸€ç§æ€è·¯çš„å®ç°

- ç©ºé—´å¤æ‚åº¦æ˜¯ O(kn + k) ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(dn)
- d æ˜¯æœ€å¤§å€¼çš„ä½æ•°ï¼Œk æ˜¯è¿›åˆ¶

```java
/**
 * @Description åŸºæ•°æ’åºçš„å¦ä¸€ç§å®ç°
 * @Author monap
 * @Date 2022/1/20 23:35
 */
public class RadixSort1 extends Sort<Integer> {
    @Override
    protected void sort() {
        // æ‰¾å‡ºæœ€å¤§å€¼
        int max = array[0];
        for (int i = 1; i < array.length; i++) {
            if (array[i] > max) {
                max = array[i];
            }
        }
        // åˆ›å»ºæ¡¶æ•°ç»„
        int[][] buckets = new int[10][array.length];
        // è®°å½•æ¯ä¸ªæ¡¶çš„å…ƒç´ æ•°é‡
        int[] bucketSizes = new int[buckets.length];
        for (int divider = 1; divider <= max; divider *= 10) {
            // å°†åŸæ•°ç»„å…ƒç´ æ”¾å…¥å¯¹åº”æ¡¶ä¸­
            for (int i = 0; i < array.length; i++) {
                int no = array[i] / divider % 10;
                buckets[no][bucketSizes[no]++] = array[i];
            }
            // æ¡¶ä¸­å–å‡ºæ•°æ®ä¾æ¬¡æ”¾å…¥åŸæ•°ç»„
            int index = 0;
            for (int i = 0; i < buckets.length; i++) {
                for (int j = 0; j < bucketSizes[i]; j++) {
                    array[index++] = buckets[i][j];
                }
                bucketSizes[i] = 0;
            }
        }
    }
}
```

## æ¡¶æ’åºï¼ˆBucket Sortï¼‰

### ç†è§£

æ‰§è¡Œæµç¨‹

- åˆ›å»ºä¸€å®šæ•°é‡çš„æ¡¶ï¼ˆæ¯”å¦‚ç”¨æ•°ç»„ã€é“¾è¡¨ä½œä¸ºæ¡¶ï¼‰
- æŒ‰ç…§ä¸€å®šçš„è§„åˆ™ï¼ˆä¸åŒç±»å‹çš„æ•°æ®ï¼Œè§„åˆ™ä¸åŒï¼‰ï¼Œå°†åºåˆ—ä¸­çš„å…ƒç´ å‡åŒ€åˆ†é…åˆ°å¯¹åº”çš„æ¡¶ 
- åˆ†åˆ«å¯¹æ¯ä¸ªæ¡¶è¿›è¡Œå•ç‹¬æ’åº
- å°†æ‰€æœ‰éç©ºæ¡¶çš„å…ƒç´ åˆå¹¶æˆæœ‰åºåºåˆ— 

é’ˆå¯¹ 0~1 çš„å°æ•°è¿›è¡Œæ’åºï¼Œå®šä¹‰ä¸€ä¸ªè§„åˆ™ï¼šå…ƒç´ åœ¨æ¡¶ä¸­çš„ç´¢å¼•  => å…ƒç´ å€¼ * å…ƒç´ æ•°é‡

![](./images/20220112004502.png)

### å®ç°

- ç©ºé—´å¤æ‚åº¦ï¼šO(n + m)ï¼Œm æ˜¯æ¡¶çš„æ•°é‡
- æ—¶é—´å¤æ‚åº¦ï¼šç”±ä¸‹åˆ—å…¬å¼å¾— O(n + k) ï¼Œk ä¸º n âˆ— logn âˆ’ n âˆ— logm

$$
O(n) + m âˆ— O(\frac{n}{m} * log \frac{n}{m}) = O(n + n âˆ—log\frac{n}{m})= O(n + n âˆ— logn âˆ’ n âˆ— logm)
$$

- å±äºç¨³å®šæ’åº

```java
/**
 * @Description æ¡¶æ’åºï¼Œé’ˆå¯¹å€¼ä¸º 0~1 çš„å°æ•°
 * @Author monap
 * @Date 2022/1/20 23:44
 */
public class BucketSort extends Sort<Double> {
    @Override
    protected void sort() {
        // æ¡¶æ•°ç»„
        List<Double>[] buckets = new List[array.length];
        for (int i = 0; i < array.length; i++) {
            int bucketIndex = (int) (array[i] * array.length);
            List<Double> bucket = buckets[bucketIndex];
            if (bucket == null) {
                bucket = new LinkedList<>();
                buckets[bucketIndex] = bucket;
            }
            bucket.add(array[i]);
        }
        // å¯¹æ¯ä¸ªæ¡¶è¿›è¡Œæ’åº
        int index = 0;
        for (int i = 0; i < buckets.length; i++) {
            if (buckets[i] == null) continue;
            // è°ƒç”¨javaå®˜æ–¹çš„æ’åºï¼Œå¯èƒ½æ˜¯å¿«æ’
            buckets[i].sort(null);
            for (Double d : buckets[i]) {
                array[index++] = d;
            }
        }
    }
}
```

